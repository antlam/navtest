<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Billing Navigation Demo</title>
  <style>
    :root{
      --bg:#0b0e11;           /* page bg */
      --card:#12161b;         /* section bg */
      --border:#2a3037;
      --muted:#1a2027;
      --text:#e6edf3;
      --text-muted:#9aa7b2;
      --ring:#4ea8ff;
      --radius:12px;
      --pad:16px;
    }
    /* page */
    body{
      margin:0;
      background:var(--bg);
      color:var(--text);
      font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      display:flex; justify-content:center;
    }
    .wrap{ width:100%; max-width:440px; padding:24px; }

    /* section (ExpandableNavigationSection) */
    .section{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:var(--radius);
      overflow:hidden;
    }
    .section + .section{ margin-top:12px; }

    .section__header{
      width:100%;
      display:flex; align-items:center; justify-content:space-between;
      padding:var(--pad);
      background:var(--card);
      border-bottom:1px solid var(--border);
      color:var(--text);
      text-align:left;
      gap:10px;
      cursor:pointer;
      transition:background .15s ease;
    }
    .section__header:hover{ background:var(--muted); }
    .section__title{ font-weight:600; }

    .chev{ width:20px; height:20px; flex:0 0 20px; transition:transform .15s ease; }
    .chev--open{ transform:rotate(90deg); }

    .section__items{ display:block; }

    /* sub item (SubNavigationItem) */
    .item{
      width:100%;
      display:block;
      text-align:left;
      padding:10px 12px;
      color:var(--text-muted);
      background:transparent;
      border:0;
      cursor:pointer;
      transition:background .15s ease, color .15s ease;
    }
    .item:hover{ background:color-mix(in oklab, var(--muted) 70%, black); color:var(--text); }
    .item:focus{ outline:2px solid var(--ring); outline-offset:-2px; }
  </style>
</head>
<body>
  <main class="wrap" id="app">
    <h1 style="margin:0 0 12px 2px; font-size:18px; font-weight:700;">Billing</h1>
    <!-- Sections will be injected here -->
  </main>

  <script>
    /***************
     * Utilities
     ***************/
    const h = (tag, attrs = {}, children = []) => {
      const el = document.createElement(tag);
      for (const [k, v] of Object.entries(attrs)) {
        if (k === 'class') el.className = v;
        else if (k === 'style') Object.assign(el.style, v);
        else if (k.startsWith('on') && typeof v === 'function') el.addEventListener(k.slice(2), v);
        else if (v !== undefined && v !== null) el.setAttribute(k, v);
      }
      for (const c of [].concat(children)) el.append(c.nodeType ? c : document.createTextNode(c));
      return el;
    };

    const ChevronRightSVG = () => {
      const svg = h('svg', { viewBox:'0 0 24 24', fill:'none', stroke:'currentColor', 'stroke-width':'2', 'stroke-linecap':'round', 'stroke-linejoin':'round', class:'chev' });
      svg.append(h('polyline', { points:'9 18 15 12 9 6' }));
      return svg;
    };

    /**************************************
     * ExpandableNavigationSection (vanilla)
     **************************************/
    function createSection({ title, items = [], defaultExpanded = false }) {
      const root = h('div', { class:'section' });

      const chevron = ChevronRightSVG();
      if (defaultExpanded) chevron.classList.add('chev--open');

      const header = h('button', {
        class:'section__header',
        type:'button',
        'aria-expanded': String(defaultExpanded),
      }, [
        h('span', { class:'section__title' }, [title]),
        chevron
      ]);

      const list = h('div', { class:'section__items', style:{ display: defaultExpanded ? 'block' : 'none' }});

      // Render items
      items.forEach((item, i) => {
        const indent = Math.max(0, Math.min((item.indent ?? 1), 8));
        const padLeft = 12 + indent * 12; // px
        const btn = h('button', {
          class:'item',
          type:'button',
          style:{ paddingLeft: padLeft + 'px' },
          'data-index': String(i),
        }, [item.title]);
        // Optional: hook a click handler (navigate, filter, etc.)
        btn.addEventListener('click', () => {
          // placeholder – replace with navigation or callback
          console.log(`[NAV] ${title} → ${item.title}`);
        });
        list.append(btn);
      });

      // Toggle logic
      header.addEventListener('click', () => {
        const open = header.getAttribute('aria-expanded') === 'true';
        header.setAttribute('aria-expanded', String(!open));
        list.style.display = open ? 'none' : 'block';
        chevron.classList.toggle('chev--open', !open);
      });

      // Keyboard affordance (Left/Right to collapse/expand)
      header.addEventListener('keydown', (e) => {
        const open = header.getAttribute('aria-expanded') === 'true';
        if (e.key === 'ArrowRight' && !open) { header.click(); }
        if (e.key === 'ArrowLeft'  && open)  { header.click(); }
      });

      root.append(header, list);
      return root;
    }

    /***********************
     * Configure your content
     * (edit this like props)
     ***********************/
    const SECTIONS = [
      {
        title: 'Claims & Insurance',
        defaultExpanded: true,
        items: [
          { title: 'Drafts', indent: 1 },
          { title: 'Unsubmitted (28)', indent: 1 },
          { title: 'Submitted (416)', indent: 1 },
          { title: 'Approved', indent: 1 },
          { title: 'On Hold', indent: 1 },
          { title: 'Rejected (203)', indent: 1 },
          { title: 'Partially Paid', indent: 1 },
          { title: 'Teleplan Submissions', indent: 2 },
          { title: 'Teleplan Remittances', indent: 2 },
          { title: 'Canada Life (TELUS eClaims)', indent: 2 },
          { title: 'HCAI', indent: 2 },
          { title: 'Manulife', indent: 2 },
          { title: 'MSP (British Columbia)', indent: 2 },
          { title: 'Pacific Blue Cross (Paper)', indent: 2 },
          { title: 'Pacific Blue Cross PROVIDERnet', indent: 2 },
          { title: 'WCB', indent: 2 },
          { title: 'WSBC', indent: 2 },
        ]
      },
      {
        title: 'Payments & Reconciliation',
        items: [
          { title: 'Payments, Refunds, and Fees', indent: 1 },
          { title: 'Applied & Unapplied Payments', indent: 1 },
          { title: 'Cash Reconciliation', indent: 1 },
          { title: 'Jane Payments Transactions', indent: 1 },
          { title: 'Jane Payments Monthly Processing', indent: 1 },
          { title: 'Jane Payments Payouts', indent: 1 },
          { title: 'Tips', indent: 1 },
          { title: 'Adjustments', indent: 1 },
          { title: 'Write Offs', indent: 1 },
        ]
      },
      {
        title: 'Sales & Products',
        items: [
          { title: 'New Sale', indent: 1 },
          { title: 'Purchases', indent: 1 },
          { title: 'Gift Cards / Certificates', indent: 1 },
          { title: 'Credit Cards', indent: 1 },
        ]
      },
      {
        title: 'Reports',
        items: [
          { title: 'Summary', indent: 1 },
          { title: 'Sales', indent: 1 },
          { title: 'Sales by Staff Member', indent: 1 },
          { title: 'Accounts Receivable', indent: 1 },
          { title: 'Credit', indent: 1 },
          { title: 'Credit Memos', indent: 1 },
          { title: 'Gift Cards', indent: 1 },
          { title: 'Gift Card Transactions', indent: 1 },
          { title: 'Package & Membership Sales', indent: 1 },
          { title: 'Package & Membership Usage', indent: 1 },
          { title: 'Compensation', indent: 1 },
          { title: 'Transactions', indent: 1 },
          { title: 'Daily Transactions', indent: 1 },
          { title: 'Product Performance', indent: 1 },
          { title: 'Inventory', indent: 1 },
        ]
      }
    ];

    /******************
     * Render to page
     ******************/
    const mount = document.getElementById('app');
    SECTIONS.forEach(cfg => mount.append(createSection(cfg)));
  </script>
</body>
</html>
